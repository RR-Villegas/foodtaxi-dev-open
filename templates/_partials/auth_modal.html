<!-- Auth Modal -->
<div id="auth-modal" class="auth-modal-overlay">
    <!-- Load use-postal-ph library for Philippine postal code lookup -->
    <script type="module">
        import usePostalPH from 'https://unpkg.com/use-postal-ph@1.1.13/dist/index.mjs';
        window.usePostalPH = usePostalPH;
    </script>
    
    <div class="auth-modal">
        <button id="close-modal" class="modal-close" aria-label="Close">&times;</button>
        
        <!-- LOGIN FORM -->
        <div id="login-form-container" class="auth-form-container active">
            <h2>Welcome Back</h2>
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" name="email" required>
                </div>

                <div class="form-group password-group">
                    <label for="login-password">Password</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="login-password" name="password" required>
                        <button type="button" class="password-toggle" aria-label="Show/hide password">
                            üëÅÔ∏è
                        </button>
                    </div>
                </div>

                <button type="submit" id="login-button" class="auth-btn-primary">Login</button>

            </form>

            <p class="form-meta">Don't have an account? <a href="#" class="switch-form" data-form="register">Register here</a></p>
        </div>

        <!-- REGISTER FORM -->
        <div id="register-form-container" class="auth-form-container">
            <h2>Create Account</h2>
            <form id="register-form" class="auth-form">
                <!-- Step 1: Basic Info -->
                <div id="register-step-1" class="register-step active">
                    <div class="form-group">
                        <label for="reg-firstname">First Name *</label>
                        <input type="text" id="reg-firstname" name="firstname" required>
                    </div>

                    <div class="form-group">
                        <label for="reg-surname">Last Name *</label>
                        <input type="text" id="reg-surname" name="surname" required>
                    </div>

                    <div class="form-group">
                        <label for="reg-email">Email *</label>
                        <input type="email" id="reg-email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="reg-phone">Mobile Number *</label>
                        <input type="tel" id="reg-phone" name="phone_number" required>
                    </div>

                    <div class="form-group password-group">
                        <label for="reg-password">Password *</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="reg-password" name="password" required>
                            <button type="button" class="password-toggle" aria-label="Show/hide password">üëÅÔ∏è</button>
                        </div>
                    </div>

                    <div class="form-group password-group">
                        <label for="reg-confirm-password">Confirm Pa</style>swo/label>
                        <div class="password-input-wrapper">
                            <input type="password" id="reg-confirm-password" name="confirm_password" required>
                            <button type="button" class="password-toggle" aria-label="Show/hide password">üëÅÔ∏è</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="reg-account-type">Account Type *</label>
                        <select id="reg-account-type" name="account_type" required>
                            <option value="">Select account type</option>
                            <option value="Buyer">Buyer</option>
                            <option value="Seller">Seller</option>
                            <option value="Rider">Rider</option>
                        </select>
                    </div>

                    <button type="button" class="auth-btn-primary" onclick="registerNextStep()">Next</button>
                </div>

                <!-- Step 2: Address Info -->
                <div id="register-step-2" class="register-step">
                    <div class="form-group">
                        <label for="reg-home">Home Address</label>
                        <input type="text" id="reg-home" name="home_address" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-address">Street Address</label>
                        <input type="text" id="reg-address" name="street_address" required>
                    </div>

                    <div class="form-group">
                        <label for="reg-region">Region *</label>
                        <select id="reg-region" name="region" required>
                            <option value="">Select region</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="reg-province">Province *</label>
                        <select id="reg-province" name="province" required>
                            <option value="">Select province</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="reg-city">City</label>
                        <select id="reg-city" name="city">
                            <option value="">Select city</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="reg-municipality">Municipality</label>
                        <select id="reg-municipality" name="municipality">
                            <option value="">Select municipality</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="reg-barangay">Barangay *</label>
                        <select id="reg-barangay" name="barangay" required>
                            <option value="">Select barangay</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="reg-zip">Zip Code *</label>
                        <input type="text" id="reg-zip" name="zip_code" required>
                    </div>

                    <div class="step-buttons">
                        <button type="button" class="auth-btn-secondary" onclick="registerPrevStep()">Back</button>
                        <button type="button" class="auth-btn-primary" onclick="registerNextStep()">Next</button>
                    </div>
                </div>

                <!-- Step 3: Seller/Rider Documents (Conditional) -->
            <div id="register-step-3" class="register-step">

                <!-- SELLER DOCUMENTS -->
                <div id="seller-docs" class="conditional-docs" style="display: none;">
                    <h3>Upload Business Documents</h3>

                    <div class="form-group">
                        <label for="reg-business-name">Business Name *</label>
                        <input type="text" id="reg-business-name" name="business_name">
                    </div>

                    <div class="form-group">
                        <label for="reg-dti-number">DTI Registration Number</label>
                        <input type="text" id="reg-dti-number" name="dti_registration_number">
                    </div>

                    <div class="form-group">
                        <label>Business Documents (JPG, PNG, PDF) *</label>
                        <input type="file" id="reg-seller-docs" name="seller_documents" 
                            multiple accept=".jpg,.jpeg,.png,.pdf">
                        <small>Upload your DTI certificate, business permit, or other relevant documents</small>
                    </div>
                </div>

                <!-- RIDER DOCUMENTS -->
                <div id="rider-docs" class="conditional-docs" style="display: none;">
                    <h3>Upload Rider Documents</h3>

                    <div class="form-group">
                        <label for="reg-license-number">Driver's License Number *</label>
                        <input type="text" id="reg-license-number" name="license_number">
                    </div>

                    <div class="form-group">
                        <label for="reg-vehicle-type">Vehicle Type *</label>
                        <select id="reg-vehicle-type" name="vehicle_type">
                            <option value="">Select vehicle type</option>
                            <option value="Motorcycle">Motorcycle</option>
                            <option value="Bicycle">Bicycle</option>
                            <option value="Van">Van</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="reg-plate-number">Plate Number *</label>
                        <input type="text" id="reg-plate-number" name="plate_number">
                    </div>

                    <div class="form-group">
                        <label>Rider Documents (JPG, PNG, PDF) *</label>
                        <input type="file" id="reg-rider-docs" name="rider_documents" 
                            multiple accept=".jpg,.jpeg,.png,.pdf">
                        <small>Upload your driver's license, vehicle registration, insurance, and other required documents</small>
                    </div>
                </div>

                <div class="step-buttons">
                    <button type="button" class="auth-btn-secondary" onclick="registerPrevStep()">Back</button>
                    <button type="button" class="auth-btn-primary" onclick="registerNextStep()">Next</button>
                </div>

            </div>



            </form>

            <p class="form-meta">Already have an account? <a href="#" class="switch-form" data-form="login">Login here</a></p>
        </div>
    </div>
</div>