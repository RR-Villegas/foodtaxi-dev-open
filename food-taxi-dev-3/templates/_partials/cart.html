<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shopping Cart | FoodTaxi</title>
<style>
/* ================= BODY & FONT ================= */
body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: #f4f5f7;
    color: #333;
    
}

/* ================= NAVBAR ================= */
.navbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: #ffffff;
    color: black;
    padding: 12px 24px;
    color: rgb(0, 0, 0);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    height: 41px;
}

.navbar .logo a {
    color: #2d8f4e;
    font-size: 25px;
    font-weight: bold;
    text-decoration: none;
}

.search-form {
    display: flex;
    gap: 6px;
    border: solid black 2px;
    border-radius: 20px;
}

.search-form input {
    padding: 6px 10px;
    border-radius: 6px;
    border: none;
}

.search-form button {
    padding: 6px 10px;
    background: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.nav-links {
    display: flex;
    align-items: center;
    gap: 15px;
    padding-right: 50px;
}

.nav-links a {
    color: rgb(0, 0, 0);
    text-decoration: none;
    font-weight: 500;
}

.user-greeting {
    font-weight: 600;
}

/* ================= SIDEBAR ================= */
.sidebar-menu {
    position: fixed;
    top: 0;
    right: -300px;
    height: 100%;
    width: 280px;
    background: #fff;
    box-shadow: -2px 0 12px rgba(0,0,0,0.15);
    transition: .3s ease;
    padding: 20px;
    z-index: 1000;
}

.sidebar-menu.active { right: 0; }

.sidebar-link {
    display: block;
    margin: 12px 0;
    font-size: 16px;
    color: #333;
    text-decoration: none;
}

.sidebar-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    z-index: 900;
}

.sidebar-overlay.active { display: block; }

.close-sidebar {
    background: none;
    border: none;
    font-size: 28px;
    float: right;
    cursor: pointer;
}

/* ================= CART PANEL ================= */
.cart-container {
    max-width: 900px;
    margin: 40px auto;
    background: #fff;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    animation: fadeIn 0.25s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
}

.cart-title {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 25px;
    color: #6c63ff;
}

.cart-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px 0;
    border-bottom: 1px solid #eee;
}

.cart-item img {
    width: 90px;
    height: 90px;
    border-radius: 12px;
    object-fit: cover;
}

.cart-item-info {
    flex: 1;
    margin-left: 20px;
}

.cart-item-title {
    font-size: 18px;
    font-weight: 600;
}

.cart-item-price {
    font-size: 16px;
    margin-top: 6px;
}

.quantity-input {
    width: 60px;
    padding: 6px;
    border-radius: 8px;
    border: 1px solid #ccc;
    text-align: center;
}

.remove-btn {
    background: #ff4d4f;
    color: #fff;
    padding: 6px 12px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.2s;
}

.remove-btn:hover { background: #e04343; }

.checkout-box {
    text-align: right;
    margin-top: 25px;
}

.checkout-box strong {
    font-size: 20px;
    display: block;
    margin-bottom: 10px;
}

.checkout-btn {
    background: #6c63ff;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: 0.2s;
}

.checkout-btn:hover { background: #554ef0; }


</style>
</head>
<body>

<!-- =================== NAVBAR =================== -->
<header class="navbar">
    <div class="logo"><a href="{{ url_for('index') }}">FoodTaxi Omega</a></div>

    <nav class="nav-links">
        {% if current_user.is_authenticated %}
            <span class="user-greeting">Hello, {{ current_user.firstname }}!</span>

            <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
            <a href="{{ url_for('login') }}">Login / Register</a>
        {% endif %}
    </nav>
</header>

<!-- SIDEBAR -->
<div id="sidebar-menu" class="sidebar-menu">
    <button id="close-sidebar" class="close-sidebar">&times;</button>
    <div class="sidebar-content">
        {% if current_user.is_authenticated %}
            <p class="sidebar-user">Logged in as <strong>{{ current_user.account_type }}</strong></p>

            {% if current_user.account_type == "Buyer" %}
                <a href="{{ url_for('cart') }}" class="sidebar-link">üõí Cart ({{ cart_item_count }})</a>
                <a href="/orders" class="sidebar-link">üì¶ My Orders</a>
            {% elif current_user.account_type == "Seller" %}
                <a href="/seller/dashboard" class="sidebar-link">üõçÔ∏è Seller Dashboard</a>
            {% endif %}

            <a href="{{ url_for('logout') }}" class="sidebar-link">Logout</a>
        {% else %}
            <a href="" class="sidebar-link">üõí Cart</a>
            <a href="{{ url_for('login') }}" class="sidebar-link">Login / Register</a>
        {% endif %}
    </div>
</div>

<div id="sidebar-overlay" class="sidebar-overlay"></div>

<!-- =================== CART CONTENT =================== -->
<div class="cart-container">
    <h2 class="cart-title">Your Cart</h2>

    {% if cart_items %}
        {% for item in cart_items %}
        <div class="cart-item">
            <img src="{{ item.image_url }}" alt="Product Image">
            <div class="cart-item-info">
                <div class="cart-item-title">{{ item.name }}</div>
                <div class="cart-item-price">‚Ç±{{ item.price }}</div>
            </div>

            <input type="number" min="1" value="{{ item.quantity }}" class="quantity-input">

            <form method="POST" action="{{ url_for('remove_from_cart', item_id=item.id) }}">
                <button class="remove-btn">Remove</button>
            </form>
        </div>
        {% endfor %}
    {% else %}
        <p>Your cart is empty. Start shopping now! üõí</p>
    {% endif %}

    <div class="checkout-box">
        <strong>Total: ‚Ç±{{ total_price or 0 }}</strong>
        <button class="checkout-btn">Proceed to Checkout</button>
    </div>
</div>

</body>
</html>
