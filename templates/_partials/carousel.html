{% if items %}
<div class="product-carousel-container" id="{{ carousel_id }}">
    <h2 class="carousel-title">Featured Products</h2>
    
    <div class="carousel-wrapper">
        
        {# Start iterating over the list of products passed from the Flask route #}
        {% for item in items %}
        
        <div class="product-card carousel-item">
            {# FIX: Changed 'product_detail' to 'view_product' #}
            <a href="{{ url_for('view_product', product_id=item.id) }}"> 
                
                {# Product Image #}
                <div class="product-image-wrapper">
                    <img src="{{ url_for('uploaded_file', folder='product', filename=item.image_url) }}" 
                         alt="{{ item.name }}" 
                         loading="lazy"
                         class="product-image">
                </div>
                
                {# Product Info #}
                <div class="item-info">
                    <h3 class="product-name">{{ item.name }}</h3>
                    <p class="store-name">Sold by: **{{ item.store_name }}**</p>
                    <p class="price">â‚±{{ item.price | round(2) }}</p>
                </div>
            </a>
            
            {# Action Button: Add to Cart #}
            <form action="{{ url_for('add_to_cart') }}" method="POST">
                <input type="hidden" name="product_id" value="{{ item.id }}">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="add-to-cart-btn" aria-label="Add {{ item.name }} to cart">
                    ðŸ›’ Add to Cart
                </button>
            </form>
        </div>
        
        {% endfor %}
    </div>
    
    {# Navigation controls #}
    <div class="carousel-nav">
        <button class="prev-btn" aria-label="Previous"></button>
        <button class="next-btn" aria-label="Next"></button>
    </div>
</div>

{% else %}
<p class="no-items-message">No featured products are available right now.</p>
{% endif %}